{"meta":{"type":"db","canSave":true,"canEdit":true,"canAdmin":true,"canStar":true,"slug":"cgnat","url":"/d/qt9C1w8mk/cgnat","expires":"0001-01-01T00:00:00Z","created":"2019-01-08T13:15:46Z","updated":"2019-01-18T13:49:35Z","updatedBy":"admin","createdBy":"admin","version":20,"hasAcl":false,"isFolder":false,"folderId":0,"folderTitle":"General","folderUrl":"","provisioned":false},"dashboard":{"annotations":{"list":[{"builtIn":1,"datasource":"-- Grafana --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations \u0026 Alerts","type":"dashboard"}]},"editable":true,"gnetId":null,"graphTooltip":0,"id":17,"iteration":1547819359847,"links":[],"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":1,"gridPos":{"h":10,"w":12,"x":0,"y":0},"id":30,"interval":"5m","legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"alias":"$tag_ifName","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["ifName"],"type":"tag"},{"params":["null"],"type":"fill"}],"measurement":"interface","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["ifHCInOctets"],"type":"field"},{"params":[],"type":"max"},{"params":["1s"],"type":"non_negative_derivative"},{"params":["*8"],"type":"math"}]],"tags":[{"key":"hostname","operator":"=~","value":"/^$hostname$/"},{"condition":"AND","key":"ifName","operator":"=~","value":"/mams-.*\\.1/"}]}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Traffic Inbound","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"bps","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":1,"gridPos":{"h":10,"w":12,"x":12,"y":0},"id":31,"interval":"5m","legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":true,"steppedLine":false,"targets":[{"alias":"$tag_ifName","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["ifName"],"type":"tag"},{"params":["null"],"type":"fill"}],"measurement":"interface","orderByTime":"ASC","policy":"default","refId":"B","resultFormat":"time_series","select":[[{"params":["ifHCOutOctets"],"type":"field"},{"params":[],"type":"max"},{"params":["1s"],"type":"non_negative_derivative"},{"params":["*8"],"type":"math"}]],"tags":[{"key":"hostname","operator":"=~","value":"/^$hostname$/"},{"condition":"AND","key":"ifName","operator":"=~","value":"/mams-.*\\.1/"}]}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Traffic Outbound","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"bps","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":0,"gridPos":{"h":10,"w":24,"x":0,"y":10},"id":28,"interval":"5m","legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"alias":"$tag_descr","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["descr"],"type":"tag"},{"params":["null"],"type":"fill"}],"measurement":"jnxOperatingTable","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["jnxOperatingCPU"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[{"key":"descr","operator":"=~","value":"/MS-MPC-PIC/"},{"condition":"AND","key":"hostname","operator":"=~","value":"/^$hostname$/"}]}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"MS-MPC-PIC CPU","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"collapsed":false,"gridPos":{"h":1,"w":24,"x":0,"y":20},"id":22,"panels":[],"title":"Stats addresses \u0026 ports","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":0,"gridPos":{"h":13,"w":12,"x":0,"y":21},"id":18,"interval":"5m","legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"alias":"$tag_index","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["index"],"type":"tag"},{"params":["null"],"type":"fill"}],"measurement":"NatStats","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["jnxNatSrcNumPortInuse"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[{"key":"hostname","operator":"=~","value":"/^$hostname$/"}]}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Ports in use","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"columns":[],"datasource":null,"fontSize":"100%","gridPos":{"h":13,"w":12,"x":12,"y":21},"hideTimeOverride":false,"id":24,"interval":"5m","links":[],"pageSize":null,"scroll":false,"showHeader":true,"sort":{"col":2,"desc":true},"styles":[{"alias":"Time","dateFormat":"YYYY-MM-DD HH:mm:ss","pattern":"Time","type":"hidden"},{"alias":"Pool","colorMode":null,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"mappingType":1,"pattern":"index","thresholds":[],"type":"number","unit":"short"},{"alias":"","colorMode":"cell","colors":["rgba(50, 172, 45, 0.97)","rgba(237, 129, 40, 0.89)","rgba(245, 54, 54, 0.9)"],"dateFormat":"YYYY-MM-DD HH:mm:ss","decimals":2,"mappingType":1,"pattern":"Percentage","thresholds":["50","80"],"type":"number","unit":"percentunit"},{"alias":"","colorMode":null,"colors":["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],"decimals":2,"pattern":"/.*/","thresholds":[],"type":"number","unit":"short"}],"targets":[{"groupBy":[{"params":["index"],"type":"tag"}],"measurement":"NatStats","orderByTime":"ASC","policy":"default","query":"SELECT last(\"jnxNatSrcNumPortInuse\")/last(\"jnxNatSrcNumPortAvail\") as Percentage,last(\"jnxNatSrcNumPortAvail\") AS Total FROM \"NatStats\" WHERE (\"hostname\" =~ /^$hostname$/) AND $timeFilter GROUP BY \"index\"","rawQuery":true,"refId":"A","resultFormat":"table","select":[[{"params":["jnxNatSrcNumPortInuse"],"type":"field"},{"params":[],"type":"last"}]],"tags":[{"key":"hostname","operator":"=~","value":"/^$hostname$/"}]}],"title":"Ports in use","transform":"table","type":"table"},{"collapsed":false,"gridPos":{"h":1,"w":24,"x":0,"y":34},"id":4,"panels":[],"title":"Hits per second","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":0,"gridPos":{"h":15,"w":12,"x":0,"y":35},"id":8,"interval":"5m","legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"alias":"$tag_index","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["index"],"type":"tag"},{"params":["null"],"type":"fill"}],"measurement":"NatRule","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["jnxNatRuleTransHits"],"type":"field"},{"params":[],"type":"mean"},{"params":["5m"],"type":"non_negative_derivative"}]],"tags":[{"key":"hostname","operator":"=~","value":"/^$hostname$/"}]}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Rule","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":0,"gridPos":{"h":15,"w":12,"x":12,"y":35},"id":2,"interval":"5m","legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","repeat":"poolvalue","repeatDirection":"h","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"alias":"$tag_index","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["index"],"type":"tag"},{"params":["null"],"type":"fill"}],"measurement":"NatPool","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["jnxNatPoolTransHits"],"type":"field"},{"params":[],"type":"mean"},{"params":["5m"],"type":"non_negative_derivative"}]],"tags":[{"key":"hostname","operator":"=~","value":"/^$hostname$/"}]}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Pool","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}},{"collapsed":false,"gridPos":{"h":1,"w":24,"x":0,"y":50},"id":26,"panels":[],"title":"Sessions","type":"row"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":null,"fill":0,"gridPos":{"h":16,"w":24,"x":0,"y":51},"id":20,"interval":"5m","legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","percentage":false,"pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"alias":"$tag_index","groupBy":[{"params":["$__interval"],"type":"time"},{"params":["index"],"type":"tag"},{"params":["null"],"type":"fill"}],"measurement":"NatStats","orderByTime":"ASC","policy":"default","refId":"A","resultFormat":"time_series","select":[[{"params":["jnxNatSrcNumSessions"],"type":"field"},{"params":[],"type":"mean"}]],"tags":[{"key":"hostname","operator":"=~","value":"/^$hostname$/"}]}],"thresholds":[],"timeFrom":null,"timeShift":null,"title":"Sessions","tooltip":{"shared":true,"sort":2,"value_type":"individual"},"type":"graph","xaxis":{"buckets":null,"mode":"time","name":null,"show":true,"values":[]},"yaxes":[{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true},{"format":"short","label":null,"logBase":1,"max":null,"min":null,"show":true}],"yaxis":{"align":false,"alignLevel":null}}],"refresh":false,"schemaVersion":16,"style":"dark","tags":[],"templating":{"list":[{"allValue":null,"current":{"text":"roshc-ro01","value":"roshc-ro01"},"datasource":"telegraf","hide":0,"includeAll":false,"label":"Hostname","multi":false,"name":"hostname","options":[],"query":"SHOW TAG VALUES ON telegraf FROM \"NatStats\" WITH KEY = hostname","refresh":1,"regex":"","sort":0,"tagValuesQuery":"","tags":[],"tagsQuery":"","type":"query","useTags":false}]},"time":{"from":"now-24h","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"","title":"CGNAT","uid":"qt9C1w8mk","version":20}}
